# 阅读器前端项目

## 前端地址

http://localhost:8081/#/readPage/1/1

## 预期功能

### 翻页效果

- 点击屏幕翻页和滑动翻页
- 左右滑动翻页

### 工具栏

- 工具栏动画时间是 0.3s
- 目录按钮
- 设置翻页效果（上下翻页、左右翻页）
- 设置背景色
- 设置字体大小
- 设置段落间距
- 切换章节按钮

### 目录列表

- popup 弹窗

### 切换章节

- 缓存章节信息

## 实现

### 翻页

#### 左右滑动点击翻页

- 需要记录点击屏幕时的 position、在屏幕中移动的距离、移动的方向、判断是否滑动了屏幕
- 监听 touchStart 事件
  - 记录点击屏幕的 position
- 监听 touchMove 事件
  - 记录滑动的距离
- 监听 touchEnd 事件
  - 判断是否滑动了
    - 如果滑动了，判断滑动距离是否超过指定范围，如果超过了，则翻页，如果没有则恢复原位，判断滑动时间是否小于 0.3s，如果是也可以翻页
    - 如果没有滑动就判断点击位置是否在指定区域
- 工具栏显示的情况下，滑动屏幕会隐藏工具栏，不会翻页

## 学到的知识

- animation-fill-mode
- axios 设置 baseURL 时，必须包括协议、域名、端口三部分，否则不识别

## TODO:

- 切换章节加载时，禁止点击翻页（完成）
- 加载章节数据时，添加 loading 效果（完成）
- 同步目录背景色（完成）
- 滑动 slider 切换章节（90%）
- 开发上下翻页效果，设置菜单添加切换翻页模式按钮（完成）
- 开发 toast 组件，学学 antd（70%）
- 添加路由，首次加载从 url 获取 novelId（完成）
- 同步章节滑轮的位置（90%）
- 右下角添加当前页数/章节数
- 左上角加上章节标题
- 开发下拉刷新组件（完成）
- 切换到水平翻页，点击屏幕没反馈（修复）
- 开发上下滑动加载章节（完成）
- 切换翻页模式后，从本章第一页开始显示（目前，后期可以优化成当前页书），切换的时候，需要更新容器的相关信息
- setting 菜单栏添加黑暗模式时的字体颜色（完成）
- 切换翻页模式后，更新菜单栏的内容，左手模式等等
- 上下翻页，点击目录中的选项跳转需要重置 chapterList（完成）
- 上下翻页（bug），当首次加载的章节内容不能够撑满一页时，无法向下滑动加载数据（解决，没有占满，自动加载下一章的数据，如此循环）
- 打开阅读器，获取本地章节数据，跳转到历史浏览章节的指定页面（第几页）
- 上下翻页模式下，点击目录等切换章节时，重置容器的位置，置顶（完成）
- 点击左右切换按钮更新滑块的位置（完成）
- 优化章节滑块的位置显示
